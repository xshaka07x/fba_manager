import requests

# 🔑 Identifiants mis à jour
CLIENT_ID = "amzn1.application-oa2-client.82df6274ee4f4e9bb6a44d8724352295"
CLIENT_SECRET = "amzn1.oa2-cs.v1.43ae2bcae768af3c58631a9608c225ee3ec2ad0a4bed60c7da8a20c24e2a75f1"
REFRESH_TOKEN = "VOTRE_REFRESH_TOKEN"  # Remplacez par votre dernier token généré

# 🌐 URL pour récupérer l'access_token
TOKEN_URL = "https://api.amazon.com/auth/o2/token"

# 📩 Corps de la requête
data = {
    'grant_type': 'refresh_token',
    'refresh_token': REFRESH_TOKEN,
    'client_id': CLIENT_ID,
    'client_secret': CLIENT_SECRET
}

# 🚀 Requête POST pour obtenir le token
try:
    response = requests.post(TOKEN_URL, data=data)
    response.raise_for_status()
    access_token = response.json().get("access_token")
    print(f"✅ Jeton d’accès récupéré : {access_token}")
except requests.exceptions.HTTPError as http_err:
    print(f"❌ Erreur HTTP : {http_err}")
    print(f"📝 Réponse : {response.json()}")
except Exception as err:
    print(f"🚨 Erreur inattendue : {err}")
